<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Game of Ur: ToyMaker: Scene System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Game of Ur<span id="projectnumber">&#160;0.3.3</span>
   </div>
   <div id="projectbrief">This is a computer adaptation of Game of Ur, written in C++ mainly using SDL and OpenGL.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_docs_2systems_2toymaker-engine_2scene__system.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ToyMaker: Scene System</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md90"></a></p>
<h1><a class="anchor" id="autotoc_md91"></a>
What is it?</h1>
<p>The <a class="el" href="classToyMaker_1_1SceneSystem.html" title="The SceneSystem, a singleton System, responsible for tracking all objects in the scene,...">ToyMaker::SceneSystem</a> is responsible for maintaining and exposing the currently active scene. It does so by holding a reference to a scene tree.</p>
<p>The scene tree is made up of scene nodes derived from <a class="el" href="classToyMaker_1_1SceneNodeCore.html" title="The core of a node in the SceneSystem, a set of components and methods overridable or usable by all t...">ToyMaker::SceneNodeCore</a>. Each node is a wrapper over an <a class="el" href="classToyMaker_1_1Entity.html" title="The Entity is a wrapper on an entity ID, used as the primary interface between an application and the...">ToyMaker::Entity</a>. This entity is guaranteed to have at least 3 components:</p>
<ul>
<li><a class="el" href="structToyMaker_1_1Placement.html" title="A component representing the position, rotation, and scale of an entity.">ToyMaker::Placement</a> &ndash; The position, orientation, and scale of the node, relative to its parent (or not, depending on <a class="el" href="group__ToyMakerSceneSystem.html#ga2ba0b56652deb40e99ab7dc41ef0dafa" title="(Presently unused) A marker to indicate how transforms should be computed for a given scene node.">ToyMaker::RelativeTo</a>)</li>
<li><a class="el" href="structToyMaker_1_1Transform.html" title="The transform component, which moves the vertices of a model to their world space coordinates during ...">ToyMaker::Transform</a> &ndash; The cached matrix representing the position of this node relative to the world.</li>
<li><a class="el" href="structToyMaker_1_1SceneHierarchyData.html" title="Component representing hierarchical information related to this entity.">ToyMaker::SceneHierarchyData</a> &ndash; A struct with information about this node's immediate neighbours in the hierarchy.</li>
</ul>
<p>Additional components added to the entity, along with that entity's system configuration, determine its participation in any particular <a class="el" href="classToyMaker_1_1System.html" title="A system template that disables systems with this form of declaration.">ToyMaker::System</a> defined for this project.</p>
<p>The hierarchical organization of the nodes is left up to the developers of an application. While scene nodes anywhere may be organized into a tree, only nodes attached to <a class="el" href="classToyMaker_1_1SceneSystem.html" title="The SceneSystem, a singleton System, responsible for tracking all objects in the scene,...">ToyMaker::SceneSystem</a>'s scene tree will be considered active and receive inputs and application updates.</p>
<p>The root node of the <a class="el" href="classToyMaker_1_1SceneSystem.html" title="The SceneSystem, a singleton System, responsible for tracking all objects in the scene,...">ToyMaker::SceneSystem</a>'s scene tree is a <a class="el" href="classToyMaker_1_1ViewportNode.html" title="A type of node capable of and responsible for interacting sensibly with the engine&#39;s RenderSystem and...">ToyMaker::ViewportNode</a>, configurable via the <code>"root_viewport_render_configuration"</code> property of the application's <code>project.json</code> file.</p>
<p>The application's <code>project.json</code> also contains a <code>"root_scene_path"</code> property, pointing to the scene file loaded as the first scene in the application.</p>
<h1><a class="anchor" id="autotoc_md92"></a>
Important API</h1>
<ul>
<li><a class="el" href="classToyMaker_1_1SceneNodeCore.html" title="The core of a node in the SceneSystem, a set of components and methods overridable or usable by all t...">ToyMaker::SceneNodeCore</a> &ndash; The base class for all scene nodes, providing methods and hooks for querying and manipulating scene trees.</li>
<li><a class="el" href="classToyMaker_1_1SceneSystem.html" title="The SceneSystem, a singleton System, responsible for tracking all objects in the scene,...">ToyMaker::SceneSystem</a> &ndash; The scene system itself, through which nodes receive access to other ECS systems, user inputs, and application updates. It is also responsible for keeping scene node <a class="el" href="structToyMaker_1_1Transform.html" title="The transform component, which moves the vertices of a model to their world space coordinates during ...">ToyMaker::Transform</a> components up-to-date.</li>
<li><a class="el" href="classToyMaker_1_1SceneFromDescription.html" title="Constructs a scene tree (separate from the scene tree) based on its description in JSON.">ToyMaker::SceneFromDescription</a> and <a class="el" href="classToyMaker_1_1SceneFromFile.html" title="Constructs a scene tree from a file containing its JSON description.">ToyMaker::SceneFromFile</a> &ndash; The resource constructors responsible for loading a scene into an application from its JSON representation.</li>
</ul>
<h1><a class="anchor" id="autotoc_md93"></a>
Why does it exist?</h1>
<p>The scene system is to a game or application what the DOM tree is to a browser, or what a directory tree is to an OS' filesystem. It allows its users to logically group objects together per the requirements of the application.</p>
<p>Scene nodes connected by a child-parent relationship also have a spatial relationship with each other. The child's <a class="el" href="structToyMaker_1_1Placement.html" title="A component representing the position, rotation, and scale of an entity.">ToyMaker::Placement</a> component specifies, by default, the child's placement relative to its parent's position, scale, and orientation, in the world.</p>
<p>This can be useful in a number of different scenarios: player character (parent) holding one swappable weapon (child), moving train (parent) carrying passengers (children), UI box (parent) containing UI text (child), and so on.</p>
<p>The enablement of the root node of a subtree also determines whether its descendants are active. A dialog box, for example, can be displayed or hidden simply by enabling or disabling its root node.</p>
<h1><a class="anchor" id="autotoc_md94"></a>
Scene files</h1>
<p>In <a class="el" href="namespaceToyMaker.html" title="Namespace containing all class definitions and functions related to the ToyMaker engine.">ToyMaker</a>, a scene file is a JSON file adhering to a specific structure. The scene file is divided into 3 sections: <code>"resources"</code>, <code>"nodes"</code>, and <code>"connections"</code></p>
<h2><a class="anchor" id="autotoc_md95"></a>
Resource list</h2>
<p>This is a list of resources. It is an array mapped to the scene file's root object's <code>"resources"</code> property.</p>
<div class="fragment"><div class="line">// NOTE: Scene file json object</div>
<div class="line">{</div>
<div class="line">    &quot;resources&quot;: [</div>
<div class="line">        // NOTE: Resource definitions go here</div>
<div class="line">    ]//,</div>
<div class="line">    // ... other sections, ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>Each resource is an object necessarily containing the name of the resource, the type of resource it is, its resource constructor (called method), and the parameters the method uses.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;resources&quot;: [</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;Bad_Panel_Texture&quot;, // NOTE: Resource name</div>
<div class="line">            &quot;type&quot;: &quot;Texture&quot;, // NOTE: Resource type</div>
<div class="line">            &quot;method&quot;: &quot;fromFile&quot;, // NOTE: Resource constructor name</div>
<div class="line">            &quot;parameters&quot;: { // NOTE: Resource constructor parameters</div>
<div class="line">                &quot;path&quot;: &quot;data/textures/panel.png&quot;</div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">        // NOTE: Definition for a dependent resource</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;Bad_Panel&quot;,</div>
<div class="line">            &quot;type&quot;: &quot;NineSlicePanel&quot;,</div>
<div class="line">            &quot;method&quot;: &quot;fromDescription&quot;,</div>
<div class="line">            &quot;parameters&quot;: {</div>
<div class="line">                &quot;base_texture&quot;: &quot;Bad_Panel_Texture&quot;, // NOTE: Resource dependency</div>
<div class="line">                &quot;content_region&quot;: [ 0.0235, 0.0235, 0.953, 0.953]</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    ]//,</div>
<div class="line">    // ... other sections, ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>Resources defined by an application at an earlier point may be used in scenes that are loaded at a later point. The newly loaded scene needn't redefine the resource, and may proceed as though the resource definition is already present in the database.</p>
<p>Note, however, it is not permitted to define the same resource twice &ndash; each resource can be defined only once. It is up to the developer to ensure that when a scene loaded later in an application requires the same resource as a scene loaded earlier, that the resource definition is only present in the scene loaded earlier.</p>
<p>See classes derived from <a class="el" href="classToyMaker_1_1ResourceConstructor.html" title="An object representing one method for creating a resource of a given kind.">ToyMaker::ResourceConstructor</a> for the parameters required by different resources and their constructors.</p>
<h2><a class="anchor" id="autotoc_md96"></a>
Scene nodes</h2>
<p>This is a list of nodes in the present scene. It is an array mapped to the scene file's root object's <code>"nodes"</code> property. Like <code>"resources"</code>, each node is also a JSON object in an array.</p>
<p>There are three types of nodes currently defined: SceneNode, SimObject, and ViewportNode. The root node of every scene file <em>must</em> be a <a class="el" href="classToyMaker_1_1SimObject.html" title="A wrapper on entity that allows objects in the Scene to be scriptable.">ToyMaker::SimObject</a>; every other node may be any one of the defined node types.</p>
<p>The root node must also have an empty string <code>""</code> as the value of its <code>"parent"</code> property. Every other node must have a non-empty <code>"parent"</code> property, where <code>"/"</code> corresponds to the root node of this scene file, and where the parent path corresponds to a node defined earlier in this section.</p>
<h3><a class="anchor" id="autotoc_md97"></a>
SceneNode</h3>
<p><a class="el" href="classToyMaker_1_1SceneNode.html" title="The most basic vanilla flavour of scene node comprised of no more than a name and some components.">ToyMaker::SceneNode</a> is the most basic type of scene node, comprised of nothing more than its names and <a class="el" href="classToyMaker_1_1ECSWorld.html" title="A class that represents a set of systems, entities, and components, that are all interrelated,...">ToyMaker::ECSWorld</a> components. It has the following appearance in a scene file:</p>
<div class="fragment"><div class="line">{</div>
<div class="line"> </div>
<div class="line">    &quot;nodes&quot; [</div>
<div class="line">        // ... other nodes</div>
<div class="line"> </div>
<div class="line">        {</div>
<div class="line">            // NOTE: the name of the node</div>
<div class="line">            &quot;name&quot;: &quot;ui_light&quot;,</div>
<div class="line"> </div>
<div class="line">            // NOTE: the path to its parent node in this scene file, relative to the scene file&#39;s </div>
<div class="line">            // root, defined earlier in the same scene file</div>
<div class="line">            &quot;parent&quot;: &quot;/viewport_UI/&quot;,</div>
<div class="line"> </div>
<div class="line">            // NOTE: the type of node this is</div>
<div class="line">            &quot;type&quot;: &quot;SceneNode&quot;,</div>
<div class="line"> </div>
<div class="line">            // NOTE: a list of components and their initial values used by this node</div>
<div class="line">            &quot;components&quot;: [</div>
<div class="line">                {</div>
<div class="line">                    &quot;orientation&quot;: [ 1.0, 0.0, 0.0, 0.0 ],</div>
<div class="line">                    &quot;position&quot;: [ 0.0, 0.0, 0.0, 1.0 ],</div>
<div class="line">                    &quot;scale&quot;: [ 1.0, 1.0, 1.0 ],</div>
<div class="line">                    &quot;type&quot;: &quot;Placement&quot;</div>
<div class="line">                },</div>
<div class="line">                {</div>
<div class="line">                    &quot;ambient&quot;: [ 0.9, 0.9, 0.9 ],</div>
<div class="line">                    &quot;diffuse&quot;: [ 0.0, 0.0, 0.0 ],</div>
<div class="line">                    &quot;specular&quot;: [ 0.0, 0.0, 0.0 ],</div>
<div class="line">                    &quot;lightType&quot;: &quot;directional&quot;,</div>
<div class="line">                    &quot;type&quot;: &quot;LightEmissionData&quot;</div>
<div class="line">                }</div>
<div class="line">            ]</div>
<div class="line">        }//,</div>
<div class="line"> </div>
<div class="line">        // ... other nodes</div>
<div class="line">    ] //,</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md98"></a>
SimObject</h3>
<p>The <a class="el" href="classToyMaker_1_1SimObject.html" title="A wrapper on entity that allows objects in the Scene to be scriptable.">ToyMaker::SimObject</a> is a type of scene node designed to provide a object-oriented and component-centric interface for application developers. Like a regular scene node, it also has a name and <a class="el" href="classToyMaker_1_1ECSWorld.html" title="A class that represents a set of systems, entities, and components, that are all interrelated,...">ToyMaker::ECSWorld</a> components, but has an additional <code>"aspects"</code> property.</p>
<p>A <a class="el" href="classToyMaker_1_1SimObjectAspect.html" title="An object containing closely related methods and data, and exposing object lifecycle and application ...">ToyMaker::SimObjectAspect</a> is the base class of aspects used by <a class="el" href="classToyMaker_1_1SimSystem.html" title="The SimSystem is a system responsible for providing scriptability via SimObjects and SimObjectAspects...">ToyMaker::SimSystem</a>. Aspects encapsulate both data and behaviour related to the object they are attached to. They play a similar role in <a class="el" href="namespaceToyMaker.html" title="Namespace containing all class definitions and functions related to the ToyMaker engine.">ToyMaker</a> that MonoBehaviours play in unity, or scripts in Godot, by providing a simple interface into scene node lifecycle events, application loop events, and the engine's signal and input systems.</p>
<p>As noted earlier, the root node of any scene file must be a SimObject. The appearance of a SimObject in a scene file is given below:</p>
<div class="fragment"><div class="line">{</div>
<div class="line"> </div>
<div class="line">    // ... other sections ...</div>
<div class="line"> </div>
<div class="line">    &quot;nodes&quot;: [</div>
<div class="line"> </div>
<div class="line">        // ... other nodes ...</div>
<div class="line"> </div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;camera&quot;,</div>
<div class="line">            &quot;parent&quot;: &quot;/viewport_UI/&quot;,</div>
<div class="line">            &quot;type&quot;: &quot;SimObject&quot;,</div>
<div class="line"> </div>
<div class="line">            // NOTE: A list of aspects defined for this type</div>
<div class="line">            &quot;aspects&quot;:[</div>
<div class="line">                {</div>
<div class="line">                    &quot;type&quot;: &quot;QueryClick&quot; // NOTE: At minimum, aspect def has the aspect type string</div>
<div class="line">                }</div>
<div class="line">            ],</div>
<div class="line"> </div>
<div class="line">            &quot;components&quot;: [</div>
<div class="line">                {</div>
<div class="line">                    &quot;fov&quot;: 45.0,</div>
<div class="line">                    &quot;aspect&quot;: 0.0,</div>
<div class="line">                    &quot;orthographic_dimensions&quot;: {</div>
<div class="line">                        &quot;horizontal&quot;: 1366,</div>
<div class="line">                        &quot;vertical&quot;: 768</div>
<div class="line">                    },</div>
<div class="line">                    &quot;near_far_planes&quot;: {</div>
<div class="line">                        &quot;near&quot;: -1000,</div>
<div class="line">                        &quot;far&quot;: 1000</div>
<div class="line">                    },</div>
<div class="line">                    &quot;projection_mode&quot;: &quot;orthographic&quot;,</div>
<div class="line">                    &quot;type&quot;: &quot;CameraProperties&quot;</div>
<div class="line">                },</div>
<div class="line">                {</div>
<div class="line">                    &quot;orientation&quot;: [ 1.0, 0.0, 0.0, 0.0 ],</div>
<div class="line">                    &quot;position&quot;: [ 0.0, 0.0, 0.0, 1.0 ],</div>
<div class="line">                    &quot;scale&quot;: [ 1.0, 1.0, 1.0 ],</div>
<div class="line">                    &quot;type&quot;: &quot;Placement&quot;</div>
<div class="line">                }</div>
<div class="line">            ]</div>
<div class="line">        }//,</div>
<div class="line"> </div>
<div class="line">        // ... other nodes ...</div>
<div class="line"> </div>
<div class="line">    ]//,</div>
<div class="line"> </div>
<div class="line">    // ... other sections ...</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><p>See classes derived from <a class="el" href="classToyMaker_1_1SimObjectAspect.html" title="An object containing closely related methods and data, and exposing object lifecycle and application ...">ToyMaker::SimObjectAspect</a> for details on parameters required by specific aspects.</p>
<p>SimObjects have one more special feature in a scene file. <br  />
</p>
<p>Since the root node of a scene file is always guaranteed to be a SimObject, when one scene is imported into another scene, the import*ing* scene may specify overrides for the name, components, and aspects, of the import*ed* scene's root node, like so:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;resources&quot;: [</div>
<div class="line"> </div>
<div class="line">        // ... other resources ...</div>
<div class="line"> </div>
<div class="line">        // NOTE: The imported scene</div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;Ur_Button&quot;,</div>
<div class="line">            &quot;type&quot;: &quot;SimObject&quot;,</div>
<div class="line">            &quot;method&quot;: &quot;fromSceneFile&quot;,</div>
<div class="line">            &quot;parameters&quot;: {</div>
<div class="line">                &quot;path&quot;: &quot;data/ur_button.json&quot;</div>
<div class="line">            }</div>
<div class="line">        }//,</div>
<div class="line"> </div>
<div class="line">        // ... other resources ...</div>
<div class="line"> </div>
<div class="line">    ],</div>
<div class="line"> </div>
<div class="line">    &quot;nodes&quot;: [</div>
<div class="line"> </div>
<div class="line">        // ... other nodes</div>
<div class="line"> </div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;Ur_Button&quot;,</div>
<div class="line">            &quot;parent&quot;: &quot;/viewport_UI/&quot;,</div>
<div class="line"> </div>
<div class="line">            // NOTE: must be &quot;Scene&quot;, even though technically it is a SimObject</div>
<div class="line">            &quot;type&quot;: &quot;Scene&quot;,</div>
<div class="line"> </div>
<div class="line">            // NOTE: in the case of an asset, which may be used multiple times </div>
<div class="line">            // simultaneously, set to true.  For proper &quot;scenes&quot;, this </div>
<div class="line">            // may be set to false.</div>
<div class="line">            &quot;copy&quot;: true,</div>
<div class="line"> </div>
<div class="line">            // NOTE: overrides to the imported scene&#39;s root node&#39;s properties</div>
<div class="line">            &quot;overrides&quot;:  {</div>
<div class="line">                &quot;name&quot;: &quot;local_vs&quot;,</div>
<div class="line">                &quot;components&quot;: [</div>
<div class="line">                    {</div>
<div class="line">                        &quot;type&quot;: &quot;Placement&quot;,</div>
<div class="line">                        &quot;orientation&quot;: [ 1.0,  0.0, 0.0, 0.0 ],</div>
<div class="line">                        &quot;position&quot;: [ 0.0, 200.0, 0.0, 1.0 ],</div>
<div class="line">                        &quot;scale&quot;: [ 1.0, 1.0, 1.0 ]</div>
<div class="line">                    }</div>
<div class="line">                ],</div>
<div class="line">                &quot;aspects&quot;: [</div>
<div class="line">                    {</div>
<div class="line">                        &quot;type&quot;: &quot;UIButton&quot;,</div>
<div class="line">                        &quot;text&quot;: &quot;Local VS&quot;,</div>
<div class="line">                        &quot;font_resource_name&quot;: &quot;Roboto_Mono_Regular_24&quot;,</div>
<div class="line">                        &quot;color&quot;: [255, 255, 255, 255],</div>
<div class="line">                        &quot;scale&quot;: 1.0,</div>
<div class="line">                        &quot;anchor&quot;: [0.5, 0.5],</div>
<div class="line">                        &quot;value&quot;: &quot;Game_Of_Ur_Local_VS&quot;,</div>
<div class="line">                        &quot;panel_active&quot;: &quot;Bad_Button_Active_Panel&quot;,</div>
<div class="line">                        &quot;panel_inactive&quot;: &quot;Bad_Button_Inactive_Panel&quot;,</div>
<div class="line">                        &quot;panel_hover&quot;: &quot;Bad_Button_Hover_Panel&quot;,</div>
<div class="line">                        &quot;panel_pressed&quot;: &quot;Bad_Button_Pressed_Panel&quot;,</div>
<div class="line">                        &quot;has_highlight&quot;: false</div>
<div class="line">                    }</div>
<div class="line">                ]</div>
<div class="line">            }</div>
<div class="line">        }//,</div>
<div class="line"> </div>
<div class="line">        // ... other nodes</div>
<div class="line"> </div>
<div class="line">    ]//,</div>
<div class="line"> </div>
<div class="line">    // ... other sections ...</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md99"></a>
ViewportNode</h3>
<p>A <a class="el" href="classToyMaker_1_1ViewportNode.html" title="A type of node capable of and responsible for interacting sensibly with the engine&#39;s RenderSystem and...">ToyMaker::ViewportNode</a> is one of the main interfaces between the developer and the <a class="el" href="classToyMaker_1_1RenderSystem.html" title="The render system for a single ECSWorld, which joins together various RenderStages into a render pipe...">ToyMaker::RenderSystem</a>. It is used to control the frequency of rendering updates to the target texture owned by this node, as well as the dimensions of that texture.</p>
<p>According to its configuration, it may also mark the boundary between the part of the scene tree corresponding to its parent viewport's <a class="el" href="classToyMaker_1_1ECSWorld.html" title="A class that represents a set of systems, entities, and components, that are all interrelated,...">ToyMaker::ECSWorld</a>, and its own ECSWorld.</p>
<p>An example of where these properties are useful is if a game wants its UI to be rendered at the platform's native resolution, while rendering its 3D game world at a lower resolution. The parent viewport and the UI viewport can have their render textures set to the size of the application window in native pixel dimensions. The game world viewport has its resolution scaled down. The parent viewport produces the final window texture by combining the results from the UI viewport and the game world viewport.</p>
<p>This also ensures that nodes in the UI world aren't affected by the systems active in the game world, and vice versa.</p>
<p>The appearance of the viewport node in a scene file is given below:</p>
<div class="fragment"><div class="line">{</div>
<div class="line"> </div>
<div class="line">    // ... other sections ...</div>
<div class="line"> </div>
<div class="line">    &quot;nodes&quot;: [</div>
<div class="line"> </div>
<div class="line">        // ... other nodes ...</div>
<div class="line"> </div>
<div class="line">        {</div>
<div class="line">            &quot;name&quot;: &quot;viewport_3D&quot;,</div>
<div class="line">            &quot;parent&quot;: &quot;/&quot;,</div>
<div class="line">            &quot;type&quot;: &quot;ViewportNode&quot;,</div>
<div class="line">            &quot;components&quot;: [</div>
<div class="line">                {</div>
<div class="line">                    &quot;type&quot;: &quot;Placement&quot;,</div>
<div class="line">                    &quot;orientation&quot;: [</div>
<div class="line">                        1.0, 0.0, 0.0, 0.0</div>
<div class="line">                    ],</div>
<div class="line">                    &quot;position&quot;: [</div>
<div class="line">                        0.0, 0.0, 0.0, 1.0</div>
<div class="line">                    ],</div>
<div class="line">                    &quot;scale&quot;: [</div>
<div class="line">                        1.0, 1.0, 1.0</div>
<div class="line">                    ]</div>
<div class="line">                }</div>
<div class="line">            ],</div>
<div class="line"> </div>
<div class="line">            // NOTE: false when this viewport owns its own world.</div>
<div class="line">            &quot;inherits_world&quot;: false,</div>
<div class="line"> </div>
<div class="line">            // NOTE: whether the viewport sends an input to its remaining descendants after either it or </div>
<div class="line">            // an earlier descendant reports handling an action successfully.</div>
<div class="line">            &quot;prevent_handled_action_propagation&quot;: false,</div>
<div class="line"> </div>
<div class="line">            // NOTE: The skybox texture used by the skybox rendering stage of the rendering pipeline.</div>
<div class="line">            &quot;skybox_texture&quot;: &quot;Skybox_Texture&quot;,</div>
<div class="line"> </div>
<div class="line">            // NOTE: The dimensions of the target texture, and the frequency with which it is updated.</div>
<div class="line">            &quot;render_configuration&quot;: {</div>
<div class="line">                &quot;base_dimensions&quot;: [1366, 768],</div>
<div class="line">                &quot;update_mode&quot;: &quot;on-render-cap-fps&quot;,</div>
<div class="line">                &quot;resize_type&quot;: &quot;texture-dimensions&quot;,</div>
<div class="line">                &quot;resize_mode&quot;: &quot;fixed-dimensions&quot;,</div>
<div class="line"> </div>
<div class="line">                // NOTE: The type of rendering pipeline used for this viewport</div>
<div class="line">                &quot;render_type&quot;: &quot;basic-3d&quot;,</div>
<div class="line"> </div>
<div class="line">                &quot;fps_cap&quot;: 60,</div>
<div class="line">                &quot;render_scale&quot;: 1.0</div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line"> </div>
<div class="line">        // ... other nodes ...</div>
<div class="line"> </div>
<div class="line">    ]//,</div>
<div class="line"> </div>
<div class="line">    // ... other sections ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>The root viewport of the <a class="el" href="classToyMaker_1_1SceneSystem.html" title="The SceneSystem, a singleton System, responsible for tracking all objects in the scene,...">ToyMaker::SceneSystem</a> is also a viewport node, retrievable using <a class="el" href="classToyMaker_1_1SceneSystem.html#a2a5012b8a48c2937dbe599eab7117345" title="Gets a reference to the root viewport of the SceneSystem, usually used to adjust its rendering config...">ToyMaker::SceneSystem::getRootViewport()</a>.</p>
<h2><a class="anchor" id="autotoc_md100"></a>
Signal connections</h2>
<p><a class="el" href="classToyMaker_1_1SimObjectAspect.html" title="An object containing closely related methods and data, and exposing object lifecycle and application ...">ToyMaker::SimObjectAspect</a>, which is the engine's scripting interface, supports signals. Any aspect subclass may declare its own signal or signal observer like so:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;toymaker/sim_system.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>MyAspect: <span class="keyword">public</span> <a class="code hl_class" href="classToyMaker_1_1SimObjectAspect.html">ToyMaker::SimObjectAspect</a>&lt;MyAspect&gt; {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="comment">// ... other class members</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// NOTE: Handler method for some signal this aspect expects to</span></div>
<div class="line">    <span class="comment">// observe</span></div>
<div class="line">    <span class="keywordtype">void</span> someSignalHandler (<span class="keywordtype">int</span> signalValue1, <span class="keywordtype">float</span> signalValue2);</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ... other class interface members</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// NOTE: A signal member of this aspect</span></div>
<div class="line">    Toymaker::Signal&lt;&gt; mSigMySignal {</div>
<div class="line">        *<span class="keyword">this</span>, <span class="comment">// NOTE: Reference to SignalTracker-derived self</span></div>
<div class="line">        <span class="stringliteral">&quot;MySignal&quot;</span> <span class="comment">// NOTE: The aspect&#39;s signal&#39;s name</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ... other class interface members</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// NOTE: A signal observer member of this aspect</span></div>
<div class="line">    <a class="code hl_class" href="classToyMaker_1_1SignalObserver.html">ToyMaker::SignalObserver&lt;int, float&gt;</a> <span class="comment">// NOTE: data types received</span></div>
<div class="line">      mObserveSomeSignal {</div>
<div class="line"> </div>
<div class="line">        *<span class="keyword">this</span>, <span class="comment">// NOTE: ref to tracker</span></div>
<div class="line">        <span class="stringliteral">&quot;SomeSignalObserved&quot;</span><span class="comment">// NOTE: name of observer</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// NOTE: Lambda connecting this observer to the handler</span></div>
<div class="line">        [<span class="keyword">this</span>](<span class="keywordtype">int</span> sig1, <span class="keywordtype">float</span> sig2) {this-&gt;someSignalHandler(sig1, sig2);}</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ... other class interface members</span></div>
<div class="line"> </div>
<div class="line">};</div>
<div class="ttc" id="aclassToyMaker_1_1SignalObserver_html"><div class="ttname"><a href="classToyMaker_1_1SignalObserver.html">ToyMaker::SignalObserver</a></div><div class="ttdoc">A SignalObserver object, which can subscribe to Signals matching its data signature and receive signa...</div><div class="ttdef"><b>Definition</b> signals.hpp:412</div></div>
<div class="ttc" id="aclassToyMaker_1_1SimObjectAspect_html"><div class="ttname"><a href="classToyMaker_1_1SimObjectAspect.html">ToyMaker::SimObjectAspect</a></div><div class="ttdoc">An object containing closely related methods and data, and exposing object lifecycle and application ...</div><div class="ttdef"><b>Definition</b> sim_system.hpp:956</div></div>
</div><!-- fragment --><p>Then, in the <code>"connections"</code> section of the scene file, use this to connect a signal from one node aspect to another:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    // ... other sections ...</div>
<div class="line"> </div>
<div class="line">    &quot;connections&quot;: [</div>
<div class="line"> </div>
<div class="line">        // ... other connections ...</div>
<div class="line"> </div>
<div class="line">        {</div>
<div class="line">            &quot;to&quot;: &quot;/path/to/my_node/@MyAspect&quot;,</div>
<div class="line">            &quot;observer&quot;: &quot;SomeSignalObserved&quot;, // NOTE: name of our observer</div>
<div class="line"> </div>
<div class="line">            &quot;from&quot;: &quot;/path/to/other_node/@SomeSignalGenAspect&quot;,</div>
<div class="line">            &quot;signal&quot;: &quot;SomeSignal&quot;</div>
<div class="line">        },</div>
<div class="line"> </div>
<div class="line">        {</div>
<div class="line">            &quot;from&quot;: &quot;/path/to/my_node/@MyAspect&quot;,</div>
<div class="line">            &quot;signal&quot;: &quot;MySignal&quot;, // our signal&#39;s name</div>
<div class="line"> </div>
<div class="line">            &quot;from&quot;: &quot;/path/to/yet/another_node/@SomeObserverAspect&quot;,</div>
<div class="line">            &quot;observer&quot;: &quot;MySignalObserved&quot;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        // ... other connections ...</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>... where all paths are relative to the current scene file's root node. Signals and observers from other scene files, provided they've been added to this scene's tree, may also be referenced. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Sep 24 2025 07:46:21 for Game of Ur by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
