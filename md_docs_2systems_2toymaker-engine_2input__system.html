<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Game of Ur: ToyMaker: Input System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Game of Ur<span id="projectnumber">&#160;0.3.3</span>
   </div>
   <div id="projectbrief">This is a computer adaptation of Game of Ur, written in C++ mainly using SDL and OpenGL.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_docs_2systems_2toymaker-engine_2input__system.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ToyMaker: Input System</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md80"></a></p>
<h1><a class="anchor" id="autotoc_md81"></a>
What is it?</h1>
<p>The <a class="el" href="namespaceToyMaker.html" title="Namespace containing all class definitions and functions related to the ToyMaker engine.">ToyMaker</a> input system is responsible for translating raw input from the app's platform into abstract inputs, called actions, meaningful within a context of the application.</p>
<p>The process by which it does so is described below:</p>
<ol type="1">
<li>It receives input from the platform via <a class="el" href="classToyMaker_1_1InputManager.html#a2b030d9b5f09f1e95dbec78703c6ed1b" title="Maps an event to its internal representation, if one is available.">ToyMaker::InputManager::queueInput()</a> (through SDL, currently).</li>
<li>It decomposes the input into several simple normalized single-axis values. Each value corresponds to an <a class="el" href="structToyMaker_1_1InputFilter.html" title="Filter that uniquely defines ONE axis of one control of one input belonging to one device.">ToyMaker::InputFilter</a>, stored in <a class="el" href="classToyMaker_1_1InputManager.html#ada5480fa76ece19a05ed3ed9bee76948" title="The current, raw state of the control+axis associated with each input filter, each between 0....">ToyMaker::InputManager::mRawInputState</a>.</li>
<li>It takes a set of 1-3 of the decomposed input and maps them to one input combo value. If the input combo value is considered triggered, it is added to a list of unmapped inputs generated this frame (<a class="el" href="classToyMaker_1_1InputManager.html#a6d1755c17b15f4f957afe4038ee68736" title="Queue of input state changes, to be consumed by whichever action contexts require them.">ToyMaker::InputManager::mUnmappedInputs</a>).</li>
<li>When the engine requests action inputs received this frame via <a class="el" href="classToyMaker_1_1InputManager.html#a470e9d6c6bb3f0b47233fae48d580457" title="Dispatches all mapped inputs received before the target time to action contexts that can handle them.">ToyMaker::InputManager::getTriggeredActions()</a>, input combos are sent to the action contexts they are valid for.</li>
<li>Each action context translates input combos received to actions that it knows, returns them to the input manager, which returns them to the engine.</li>
<li>The engine forwards the mapped actions to whichever objects need them, via <a class="el" href="classToyMaker_1_1ActionDispatch.html#aa49717b110c011dbf3ee955ac11c101a" title="Sends data for an action to all of that action&#39;s registered handlers.">ToyMaker::ActionDispatch::dispatchAction()</a>.</li>
</ol>
<div class="fragment"><div class="line">   W    ______</div>
<div class="line"> A|S|D        \___.--&gt; Character : Move (2 Axes) --&gt; (Move handlers)</div>
<div class="line">&lt;keyboard&gt;     /</div>
<div class="line">              /</div>
<div class="line">             /</div>
<div class="line"> (( L ))----/</div>
<div class="line">&lt;controller&gt;</div>
</div><!-- fragment --><p>Setup takes place via an input bindings file, pointed to by the project configuration's <code>"input_map_path"</code> property. This bindings file lists</p>
<ul>
<li>Action contexts valid for this project.</li>
<li>Actions available in each context.</li>
<li>The combination of input values (identified by their <a class="el" href="structToyMaker_1_1InputFilter.html" title="Filter that uniquely defines ONE axis of one control of one input belonging to one device.">ToyMaker::InputFilter</a>) that map to one axis of an action. Each combination is referred to as an input binding.</li>
</ul>
<h1><a class="anchor" id="autotoc_md82"></a>
Important API</h1>
<ul>
<li><a class="el" href="classToyMaker_1_1InputManager.html#ad961d76a796b5a879be119f2dea73907" title="Registers a new action context with a given name.">ToyMaker::InputManager::registerActionContext()</a> &ndash; Defines a namespace for actions (which are virtual inputs).</li>
<li><a class="el" href="classToyMaker_1_1InputManager.html#a75b8fd23f2e10685ed5740a1899a118a" title="Registers an action definition against a defined action context.">ToyMaker::InputManager::registerAction()</a> &ndash; Adds the definition of an action to an action context.</li>
<li><a class="el" href="classToyMaker_1_1ActionContext.html" title="A container for actions that make sense within a given context.">ToyMaker::ActionContext</a> &ndash; A namespace for a set of application-defined virtual inputs, called actions.</li>
<li><a class="el" href="classToyMaker_1_1IActionHandler.html" title="Class interface for systems that wish to be notified when action events occur in an action context.">ToyMaker::IActionHandler</a> &ndash; The base class of an object wishing to handle actions generated by the input system.</li>
<li><a class="el" href="classToyMaker_1_1ActionDispatch.html" title="An object responsible for tracking action listeners for a given project.">ToyMaker::ActionDispatch</a> &ndash; A class whose instances are responsible for tracking subscribers of an action, and for routing actions triggered this frame to them.</li>
</ul>
<h1><a class="anchor" id="autotoc_md83"></a>
Why does it exist?</h1>
<p>The main purpose of the input system is to provide a layer of abstraction between application-specific code, and platform-generated input.</p>
<p>The application defines the form of each action it expects to receive. The action handler can safely expect that this is the only form its input will take, and doesn't have to reason about differences in platforms.</p>
<p>Adapting the application to a specific platform then becomes a much more trivial task of specifying which real platform inputs map to virtual actions, without touching any of the application's code. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Sep 24 2025 07:46:21 for Game of Ur by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
